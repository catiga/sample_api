package thirdpart

import (
	"encoding/json"
	"fmt"
	"testing"
)

func TestAPI(t *testing.T) {
	s := `{"code":1,"message":"ok","result":{"6NcdiK8B5KK2DzKvzvCfqi8EHaEqu48fyEzC8Mm9pump":{"balance_mutable_authority":{"authority":[],"status":"0"},"closable":{"authority":[],"status":"0"},"creators":[],"default_account_state":"1","default_account_state_upgradable":{"authority":[],"status":"0"},"dex":[{"day":{"price_max":"3879.651667757435","price_min":"2433.2050715737587","volume":"8737591.931766512"},"dex_name":"raydium","fee_rate":"0.0025","id":"5N96fYr2ZzaiNyZaYGAi31xvT5ExzfPnwh2s95yaXXSv","lp_amount":"4897.144135841","month":{"price_max":"47730.47691480813","price_min":"2415.3606594","volume":"393547947.11847"},"open_time":"0","price":"3079.890237778907","tvl":"1502631.21397516792","type":"Standard","week":{"price_max":"6391.176146","price_min":"2415.3606594","volume":"29382663.52255648"}},{"day":{"price_max":"3853.757037937151","price_min":"2435.7195875251086","volume":"113609.917647055"},"dex_name":"raydium","fee_rate":"0.02","id":"F2YcPXobhy9QUUyR3Q5gbgdEcVsAkY2j3NCp345KCLNT","lp_amount":null,"month":{"price_max":"45736.5193922405","price_min":"2414.719875369274","volume":"16554660.038961235"},"open_time":"0","price":"3034.560778500399","tvl":"17187.1026033742","type":"Concentrated","week":{"price_max":"6273.06179025932","price_min":"2414.719875369274","volume":"411900.15300558286"}},{"day":{"price_max":"0.04934768914338873","price_min":"0.033717119544285044","volume":"3833.9500014838136"},"dex_name":"raydium","fee_rate":"0.0025","id":"CNTdAvj3Az6RGoGb86KTqtFBF77Dd5a7cLr5DDrChEHM","lp_amount":null,"month":{"price_max":"0.04934768914338873","price_min":"0.033717119544285044","volume":"4395.158145724986"},"open_time":"0","price":"0.04802647479236532","tvl":"1804.914855","type":"Concentrated","week":{"price_max":"0.04934768914338873","price_min":"0.033717119544285044","volume":"4395.158145724986"}},{"day":{"price_max":"3857.9382597834806","price_min":"3263.716670718859","volume":"1048.7748536707998"},"dex_name":"raydium","fee_rate":"0.001","id":"ERk1k3oBpZCyXLWcVDHWZC3Z2tXxsYDU7X6hGaY4zr4e","lp_amount":null,"month":{"price_max":"8537.731667681719","price_min":"3263.716670718859","volume":"604516.8621405492"},"open_time":"0","price":"3267.2243572366992","tvl":"356.55732127848","type":"Concentrated","week":{"price_max":"6394.518725753653","price_min":"3263.716670718859","volume":"79333.23295081452"}},{"day":{"price_max":"-1","price_min":"-1","volume":"0"},"dex_name":"raydium","fee_rate":"0.01","id":"6F81gPujGimAQdpG9zfkE6CXYh5YQMX4a7XpJfe6NwrP","lp_amount":null,"month":{"price_max":"20210.47441443249","price_min":"3008.585376171185","volume":"221452.7966843996"},"open_time":"0","price":"6364.056582762041","tvl":"1.89874824048","type":"Concentrated","week":{"price_max":"-1","price_min":"-1","volume":"0"}},{"day":{"price_max":"3736.8114206479263","price_min":"2519.3151937482608","volume":"0.6145213449823909"},"dex_name":"raydium","fee_rate":"0.04","id":"CQHdgcueajomg8HguX9ZovpbhHvpU4PDwDPdcEGZJBCi","lp_amount":"0.008791803","month":{"price_max":"14118.323244803814","price_min":"2519.3151937482608","volume":"9.062520271841416"},"open_time":"1737592188","price":"3265.8870460252156","tvl":"1.37364590468","type":"Standard","week":{"price_max":"6271.963754934771","price_min":"2519.3151937482608","volume":"1.595921428892527"}},{"day":{"price_max":"-1","price_min":"-1","volume":"0"},"dex_name":"raydium","fee_rate":"0.002","id":"CudDry3xhHU6w72UNEy4SdfMofwPJyXYkR4y1ejGe6Yh","lp_amount":null,"month":{"price_max":"7525.30297452486","price_min":"6487.537870108709","volume":"3716.7669164051736"},"open_time":"0","price":"7139.92077223297","tvl":"0.49477809556","type":"Concentrated","week":{"price_max":"-1","price_min":"-1","volume":"0"}},{"day":{"price_max":"-1","price_min":"-1","volume":"0"},"dex_name":"raydium","fee_rate":"0.008","id":"4FLCVGt2Vy1cpxARsXq3eG8LQvGxyLpjpLg3RPhKtuyH","lp_amount":null,"month":{"price_max":"20719.30593134721","price_min":"7223.8785","volume":"37.31209756129108"},"open_time":"0","price":"7314.766560478637","tvl":"0.31981511282","type":"Concentrated","week":{"price_max":"-1","price_min":"-1","volume":"0"}},{"day":{"price_max":"-1","price_min":"-1","volume":"0"},"dex_name":"raydium","fee_rate":"0.02","id":"Fr6mvEnf5iuSoHiHWoK81SEHJDUWrc8DkAtCWCPrSEv8","lp_amount":null,"month":{"price_max":"-1","price_min":"-1","volume":"0"},"open_time":"0","price":"0.013302785778615909","tvl":"0.000129","type":"Concentrated","week":{"price_max":"-1","price_min":"-1","volume":"0"}}],"freezable":{"authority":[],"status":"0"},"holders":[{"account":"5Q544fKrFoe6tsEbD7S8EmxGTJYAKtTVhAW5Q5pge4j1","balance":"31481498.953824","is_locked":0,"locked_detail":[],"percent":"0.0315","tag":"","token_account":"76aPQN6oHg1hvPEUUL3bmEp5JaNoHxpGMB7sHMMKRZUF"},{"account":"3xdRWngfgU5M7BrnR9KGPj8nP7tYiLeSxE2AxgZSdbUu","balance":"20316552.981326","is_locked":0,"locked_detail":[],"percent":"0.0203","tag":"","token_account":"49o33U3NXEqzEzgERukj5Q3qfNTRERJbaoaq8aSi2x4C"},{"account":"HjE6xhPgPFNTsynQyDDd95LJUQs3S9Yn4Bks1V5armc9","balance":"19308349.14","is_locked":0,"locked_detail":[],"percent":"0.0193","tag":"","token_account":"5XP37MmAcL4z2MAZbztgJZ7Z9C85oVkAz4KCSueEox29"},{"account":"2J2zpzeZX4BL3xQ786JUDi9MmbZg9vbriT84kFbbiwAd","balance":"18619049.124404","is_locked":0,"locked_detail":[],"percent":"0.0186","tag":"","token_account":"rVcJgWo3Xymq2oivFMM8E9Pb2ewgEkXHwV5yYkiKBau"},{"account":"7WUzqEfQqK2sRbweM7h2BHJVyam3q487MTUj1AxNc6fZ","balance":"14237533.490032","is_locked":0,"locked_detail":[],"percent":"0.0142","tag":"","token_account":"Dr678EpCjrDKJLisyJ8H7vuyJ8ZXEH1UN9kewmrRfHiy"},{"account":"Eb9npABqb51Yrx4QpmuTW6FujFQkkS8AS4B6EnTkkinT","balance":"11800858.355882","is_locked":0,"locked_detail":[],"percent":"0.0118","tag":"","token_account":"G2zEGNz9hAA5tYCBL4PmYPavcoLqj6gyD28kAfRCaTD8"},{"account":"HHSfziU1sFpn55MBch6VjXbfTWb1QTKc1EBFhvn7rZgL","balance":"11636157.17796","is_locked":0,"locked_detail":[],"percent":"0.0116","tag":"","token_account":"CgcHkZsXY6B1BRW2cvNPCDtVv6otfoQg4nv4Yw9CSSG3"},{"account":"DXrSaNjvUTTAs9CTYfwXZPf7Gv83TRJK5LZHAkfSmya9","balance":"11190143.42186","is_locked":0,"locked_detail":[],"percent":"0.0112","tag":"","token_account":"C1LBdcZeWsKMDZtvdrdNmwTCMvULLEYdhkJbFMMxsLaN"},{"account":"EiUaC1tPyq4D8uc5Di48QEQmmr3JePwFbzm1omiAZvy6","balance":"10876957.423962","is_locked":0,"locked_detail":[],"percent":"0.0109","tag":"","token_account":"7zrCr6DCpsGjUUdjr9ExZvUwDr44VmKx4kXY58D4GgQd"},{"account":"8btxMCUhKDymQZ4YjNK9VqG2eKJfwg5HLDop8WqeFYjy","balance":"10188888.000002","is_locked":0,"locked_detail":[],"percent":"0.0102","tag":"","token_account":"Aa9n1fm4EGysyf9farqGV3GbV56pHzDDA4aoXgkaAGiu"}],"lp_holders":[{"account":"2J2zpzeZX4BL3xQ786JUDi9MmbZg9vbriT84kFbbiwAd","balance":"687.587847504","is_locked":0,"locked_detail":[],"percent":"0.8050","tag":"","token_account":"5tftyP27XfC2wKwK1fyxa9PWLHWxtzNmVVmQJeXeDsC5"},{"account":"3pT7TS1K7mDKENQZ489ZV1EU2c6fHyMDaoNAwvTSh1zb","balance":"126.584566242","is_locked":0,"locked_detail":[],"percent":"0.1482","tag":"","token_account":"639VCVFhRDFu5fNMGhUoiqF4UeaVKWMbGAoTH6r77s7J"},{"account":"F3jSXsyAnQLJ77jRho37BzQJZLRLvX9Dki3zVAn6SNgj","balance":"25.358216213","is_locked":0,"locked_detail":[],"percent":"0.0297","tag":"","token_account":"H7sQiWsP6tu1N2LYASQePokxbqLUuCh5skE3mwKqabCi"},{"account":"7DGb4UFTVaKtrX2GaFk1cZbQtgMXSMyDyR3uUDzBghqP","balance":"8.269085752","is_locked":0,"locked_detail":[],"percent":"0.0097","tag":"","token_account":"HBEXphLPCTR2Lu2AiYVtab41srAVMHcybLRFDRLTmcPW"},{"account":"pmZnRub1aQwcqYWrSGtkLUGd1xv8sFQpG5vT8EimYpZ","balance":"4.335085392","is_locked":0,"locked_detail":[],"percent":"0.0051","tag":"","token_account":"C9cprgN3RzqFTdq75o6MdQpy15vkzPvG6wgPi6YUoXyT"},{"account":"FJcHAt6wC64FNmAkva8v7xmcHGGMz2pmaxhc8CRixVCX","balance":"1.930211186","is_locked":0,"locked_detail":[],"percent":"0.0023","tag":"","token_account":"CD4d12PbeBXab5KWr1BgLJ6mDTNwCgduUkMBGWkcSny1"},{"account":"7VjaPzZN8ugvBa3CQeFXcG3u25xutTZ6KxaxcufLE9ys","balance":"0.034627742","is_locked":0,"locked_detail":[],"percent":"0.0000","tag":"","token_account":"5oyWqhmcRTSiVcEAWjyVpNuTGBNjZKzVw33DU1XKujEL"}],"metadata":{"description":"it's stonks time","name":"STONKS","symbol":"STONKS","uri":"https://ipfs.io/ipfs/QmaiHAmmcML3QJWXKQaH8GV3AryMsjiBFT72eoPtCb5uTX"},"metadata_mutable":{"metadata_upgrade_authority":[],"status":"0"},"mintable":{"authority":[],"status":"0"},"non_transferable":"0","total_supply":"999935291.238231","transfer_fee":{},"transfer_fee_upgradable":{"authority":[],"status":"0"},"transfer_hook":[],"transfer_hook_upgradable":{"authority":[],"status":"0"},"trusted_token":0}}}`

	var o GoplusApiResponse
	err := json.Unmarshal([]byte(s), &o)
	fmt.Println(err)

	rr := o.Result["6NcdiK8B5KK2DzKvzvCfqi8EHaEqu48fyEzC8Mm9pump"]
	fmt.Println(rr)

	v, err := GetMetaInfoFromGoPlus("6NcdiK8B5KK2DzKvzvCfqi8EHaEqu48fyEzC8Mm9pump")

	fmt.Println(v)
}
